{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block head %}
    <!-- React и ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel для JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
{% endblock %}

{% block content %}
    <div>
        <div class="inline-block">
            <h1>{{ name }} {{ surname }}</h1>
            <h6>{{ username }}</h6>
            <p><i>{{ bio }}</i></p>
        </div>
        <div class="inline-block">
            <button id="logout_button" class="btn btn-danger">Logout</button>
            <button id="settings_button" class="btn btn-primary">Settings</button>
        </div>
        <div><a href="/new_project_page"><button class="btn btn-success">New Project</button></a></div>
        <input type="hidden" name="username" id="username" value="{{ username }}">
        <br><br>
        <div id="projects">

        </div>
    </div>
    <script src="/js/profile.js"></script>
    <script src="/js/show_projects_on_mainpage.js" type="text/babel"></script>
    <!-- <script type="text/babel">
        import React, { useState, useEffect } from "react";

        const MyProjects = () => {
        const [projects, setProjects] = useState([]);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);

        useEffect(() => {
            fetch("/my_projects", {
            method: "GET",
            credentials: "include"
            })
            .then(response => {
                if (!response.ok) {
                throw new Error("Failed to fetch projects");
                }
                return response.json();
            })
            .then(data => {
                setProjects(data);
                setLoading(false);
            })
            .catch(err => {
                setError(err.message);
                setLoading(false);
            });
        }, []);

        if (loading) return <div>Loading...</div>;
        if (error) return <div>Error: {error}</div>;

        return (
            <div>
            <h2>My Projects</h2>
            {projects.length === 0 ? (
                <p>No projects found</p>
            ) : (
                <ul>
                {projects.map((project, index) => (
                    <li key={index}>
                    <h3>{project.name}</h3>
                    <p>{project.description}</p>
                    <p><strong>Owner:</strong> {project.owner_username}</p>
                    <p><strong>Input type:</strong> {project.input_type}</p>
                    <p><strong>Output type:</strong> {project.output_type}</p>
                    <p><strong>Created at:</strong> {project.created_at}</p>
                    </li>
                ))}
                </ul>
            )}
            </div>
        );
        };

        export default MyProjects;
    </script> -->
{% endblock %}